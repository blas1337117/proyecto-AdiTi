/*
jQuery Waypoints - v1.1.5
Copyright (c) 2011-2012 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt
*/
(function(e){if(typeof define==="function"&&define.amd)define(["jquery"],e);else e(jQuery)})(function(e){(function(e,t,n,r,i){var s=e(r),o="waypoint.reached",u=function(e,n){e.element.trigger(o,n);if(e.options.triggerOnce){e.element[t]("destroy")}},a=function(e,t){var n=t.waypoints.length-1;while(n>=0&&t.waypoints[n].element[0]!==e[0]){n-=1}return n},f=[],l=function(t){e.extend(this,{element:e(t),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:e.proxy(function(){var t=this.element.scrollTop(),r=t>this.oldScroll,i=this,s=e.grep(this.waypoints,function(e,n){return r?e.offset>i.oldScroll&&e.offset<=t:e.offset<=i.oldScroll&&e.offset>t}),o=s.length;if(!this.oldScroll||!t){e[n]("refresh")}this.oldScroll=t;if(!o){return}if(!r){s.reverse()}e.each(s,function(e,t){if(t.options.continuous||e===o-1){u(t,[r?"down":"up"])}})},this)});e(t).scroll(e.proxy(function(){if(!this.didScroll){this.didScroll=true;r.setTimeout(e.proxy(function(){this.doScroll();this.didScroll=false},this),e[n].settings.scrollThrottle)}},this)).resize(e.proxy(function(){if(!this.didResize){this.didResize=true;r.setTimeout(e.proxy(function(){e[n]("refresh");this.didResize=false},this),e[n].settings.resizeThrottle)}},this));s.load(e.proxy(function(){this.doScroll()},this))},c=function(t){var n=null;e.each(f,function(e,r){if(r.element[0]===t){n=r;return false}});return n},h={init:function(r,i){this.each(function(){var s=e.fn[t].defaults.context,u,h=e(this);if(i&&i.context){s=i.context}if(!e.isWindow(s)){s=h.closest(s)[0]}u=c(s);if(!u){u=new l(s);f.push(u)}var p=a(h,u),d=p<0?e.fn[t].defaults:u.waypoints[p].options,v=e.extend({},d,i);v.offset=v.offset==="bottom-in-view"?function(){var t=e.isWindow(s)?e[n]("viewportHeight"):e(s).height();return t-e(this).outerHeight()}:v.offset;if(p<0){u.waypoints.push({element:h,offset:null,options:v})}else{u.waypoints[p].options=v}if(r){h.bind(o,r)}if(i&&i.handler){h.bind(o,i.handler)}});e[n]("refresh");return this},remove:function(){return this.each(function(t,n){var r=e(n);e.each(f,function(e,t){var n=a(r,t);if(n>=0){t.waypoints.splice(n,1)}})})},destroy:function(){return this.unbind(o)[t]("remove")}},p={refresh:function(){e.each(f,function(t,r){var i=e.isWindow(r.element[0]),s=i?0:r.element.offset().top,o=i?e[n]("viewportHeight"):r.element.height(),a=i?0:r.element.scrollTop();e.each(r.waypoints,function(e,t){if(!t){return}var n=t.options.offset,i=t.offset;if(typeof t.options.offset==="function"){n=t.options.offset.apply(t.element)}else{if(typeof t.options.offset==="string"){var f=parseFloat(t.options.offset);n=t.options.offset.indexOf("%")?Math.ceil(o*(f/100)):f}}t.offset=t.element.offset().top-s+a-n;if(t.options.onlyOnScroll){return}if(i!==null&&r.oldScroll>i&&r.oldScroll<=t.offset){u(t,["up"])}else{if(i!==null&&r.oldScroll<i&&r.oldScroll>=t.offset){u(t,["down"])}else{if(!i&&a>t.offset){u(t,["down"])}}}});r.waypoints.sort(function(e,t){return e.offset-t.offset})})},viewportHeight:function(){return r.innerHeight?r.innerHeight:s.height()},aggregate:function(){var t=e();e.each(f,function(n,r){e.each(r.waypoints,function(e,n){t=t.add(n.element)})});return t}};e.fn[t]=function(n){if(h[n]){return h[n].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof n==="function"||!n){return h.init.apply(this,arguments)}else{if(typeof n==="object"){return h.init.apply(this,[null,n])}else{e.error("Method "+n+" does not exist on jQuery "+t)}}}};e.fn[t].defaults={continuous:true,offset:0,triggerOnce:false,context:r};e[n]=function(e){if(p[e]){return p[e].apply(this)}else{return p.aggregate()}};e[n].settings={resizeThrottle:200,scrollThrottle:100};s.load(function(){e[n]("refresh")})})(e,"waypoint","waypoints",window)})
