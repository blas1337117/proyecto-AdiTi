define(["$","sb/ooze"],function(e,r){"use strict";var t,n=[],i=function(r,i,o,u){var d=e("<div/>").html(r).addClass("alert-bar alert-bar-t-"+u);return t=e(".header"),(!t.length||a())&&d.addClass("alert-bar-l-top"),n.push([r,i,u,d]),e.each(o,function(e,r){("show"===e||"dismiss"===e)&&(e="sbAlert."+e),d.on(e,r)}),1===n.length&&s(),d},s=function(){var e=n[0],i=(e[0],e[1]),s=(e[2],e[3]);r.drip("notice.show"),s.trigger("sbAlert.show").appendTo(t.length&&!a()?t:"body"),i>=0?setTimeout(function(){o(s)},i):n.shift()},o=function(e){e.addClass("alert-bar-s-closing"),setTimeout(function(){e.trigger("sbAlert.dismiss").remove(),r.drip("notice.dismiss")},400),n.shift(),n.length&&s()},a=function(){if(require.defined("sb/modals")){var e=require("sb/modals");return e.getStackSize()}return 0};return{notice:function(e,r,t){return i(e,r||4e3,t||{},"alert")},error:function(e,r,t){return i(e,r||4e3,t||{},"error")}}});